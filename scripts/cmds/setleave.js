this.config = {
	name: "setleave",
	version: "1.0.1",
	author: {
		name: "lnwsck",
		contacts: ""
	},
	cooldowns: 5,
	role: 0,
	shortDescription: "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°",
	longDescription: "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏≠‡∏Å‡∏•‡∏≤‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
	category: "custom",
	guide: "{p}{n} text [<‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤>|reset]: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏ó‡∏≤‡∏á‡∏•‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ:"
		+ "\n+ {userName}: ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà"
		+ "\n+ {boxName}:  ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó"
		+ "\n+ {type}: ‡∏ã‡πâ‡∏≤‡∏¢/‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÇ‡∏î‡∏¢ qtv"
		+ "\n+ {session}: ‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô"
		+ "\n* ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ä‡πà‡∏ô: {p}{n} text {userName} ‡πÅ‡∏•‡πâ‡∏ß {type} ‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö ü§ß"
		+ "\n"
		+ "\nReply (‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö) ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ {p}{n} file: ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏° (‡∏†‡∏≤‡∏û, video, audio)"
		+ "\n{p}{n} file reset: ‡∏•‡∏ö‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå"
};

module.exports = {
	config: this.config,
	start: async function ({ args, threadsData, globalGoat, message, event, download }) {
		const fs = require("fs-extra");
		const { threadID } = event;
		const data = (await threadsData.getData(threadID)).data;

		if (args[0] == "text") {
			if (!args[1]) return message.reply("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°");
			else if (args[1] == "reset") data.leaveMessage = null;
			else data.leaveMessage = args.slice(1).join(" ");
		}
		else if (args[0] == "file") {
			if (args[1] == "reset") {
				try {
					fs.unlinkSync(__dirname + "/../events/src/mediaLeave/" + data.leaveAttachment);
				}
				catch (e) { }
				data.leaveAttachment = null;
			}
			else if (!event.messageReply || event.messageReply.attachments.length == 0) return message.reply("‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö) ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/video/audio");
			else {
				const attachments = event.messageReply.attachments;
				const typeFile = attachments[0].type;
				const ext = typeFile == "audio" ? ".mp3" :
					typeFile == "video" ? ".mp4" :
						typeFile == "photo" ? ".png" :
							typeFile == "animated_image" ? ".gif" : "";
				const fileName = "leave" + threadID + ext;
				await download(attachments[0].url, __dirname + "/../events/src/mediaLeave/" + fileName);
				data.leaveAttachment = fileName;
			}
		}
		else return message.SyntaxError();

		await threadsData.setData(threadID, {
			data
		}, (err, info) => {
			if (err) return message.reply(`‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á: ${err.name}: ${err.message}`);
			message.reply(`‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å`);
		});

	}
};